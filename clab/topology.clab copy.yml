name: CVaaS and AVD Demo, EVPN AA
prefix: ""

mgmt:
  network: custom_mgmt
  ipv4-subnet: 10.0.0.0/16

topology:
  kinds:
    ceos:
      enforce-startup-config: true
      image: arista/ceos:4.31.4M
  defaults:
    kind: ceos
    #extras:
    #  ceos-copy-to-flash:
    #    - clab/cv-onboarding-token
    # an alternative to ceos-copy-to-flash could be bind
    # keeping the bind settings here just in case
    # binds:
    #   - cv-onboarding-token:/mnt/flash/cv-onboarding-token:ro
  nodes:
    # DC1
    dc1-s01:
      mgmt-ipv4: 10.0.1.1
      binds:
        - sn/dc1-s01.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc1-s01.cfg
    dc1-s02:
      mgmt-ipv4: 10.0.1.2
      binds:
        - sn/dc1-s02.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc1-s02.cfg
    dc1-l01:
      mgmt-ipv4: 10.0.2.1
      binds:
        - sn/dc1-l01.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc1-l01.cfg
    dc1-l02:
      mgmt-ipv4: 10.0.2.2
      binds:
        - sn/dc1-l02.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc1-l02.cfg
    dc1-h01:
      mgmt-ipv4: 10.0.3.1
      startup-config: init-configs/dc1-h01.cfg
    # DC2
    dc2-s01:
      mgmt-ipv4: 10.0.1.1
      binds:
        - sn/dc2-s01.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc2-s01.cfg
    dc2-s02:
      mgmt-ipv4: 10.0.1.2
      binds:
        - sn/dc2-s02.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc2-s02.cfg
    dc2-l01:
      mgmt-ipv4: 10.0.2.1
      binds:
        - sn/dc2-l01.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc2-l01.cfg
    dc2-l02:
      mgmt-ipv4: 10.0.2.2
      binds:
        - sn/dc2-l02.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/dc2-l02.cfg
    dc2-h01:
      mgmt-ipv4: 10.0.3.1
      startup-config: init-configs/dc2-h01.cfg

  links:
    # links for DC1
    - endpoints: ["dc1-l01:eth1", "dc1-s01:eth1"]
    - endpoints: ["dc1-l01:eth2", "dc1-s02:eth1"]
    - endpoints: ["dc1-l02:eth1", "dc1-s01:eth2"]
    - endpoints: ["dc1-l02:eth2", "dc1-s02:eth2"]
    - endpoints: ["dc1-h01:eth1", "dc1-l01:eth10"]
    - endpoints: ["dc1-h01:eth2", "dc1-l02:eth10"]
    # links for DC2
    - endpoints: ["dc2-l01:eth1", "dc2-s01:eth1"]
    - endpoints: ["dc2-l01:eth2", "dc2-s02:eth1"]
    - endpoints: ["dc2-l02:eth1", "dc2-s01:eth2"]
    - endpoints: ["dc2-l02:eth2", "dc2-s02:eth2"]
    - endpoints: ["dc2-h01:eth1", "dc2-l01:eth10"]
    - endpoints: ["dc2-h01:eth2", "dc2-l02:eth10"]
    # links for DCI: DC1-DC2
    - endpoints: ["dc1-s01:eth6", "dc2-s01:eth6"]
    - endpoints: ["dc1-s02:eth6", "dc2-s02:eth6"]